<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment - 404 Collective</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #ff0055;
      --dark-bg: #1a1a1a;
      --card-bg: #2a2a2a;
      --text-light: #ffffff;
      --text-muted: #cccccc;
    }
    
    body {
      background-color: var(--dark-bg);
      color: var(--text-light);
    }
    
    .navbar {
      background-color: rgba(26, 26, 26, 0.95) !important;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 0, 85, 0.1);
    }
    
    .navbar-brand {
      color: var(--primary-color) !important;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.5rem;
    }
    
    .navbar-logo {
      width: 45px;
      height: 45px;
      object-fit: contain;
      filter: drop-shadow(0 0 10px rgba(255, 0, 85, 0.3));
    }
    
    .navbar-nav .nav-link {
      color: var(--text-light) !important;
      transition: all 0.3s ease;
      font-weight: 500;
      padding: 0.75rem 1rem !important;
      border-radius: 0.5rem;
      margin: 0 0.25rem;
    }
    
    .navbar-nav .nav-link:hover {
      color: var(--primary-color) !important;
      background-color: rgba(255, 0, 85, 0.1);
      transform: translateY(-2px);
    }
    
    .navbar-nav .nav-link.active {
      color: var(--primary-color) !important;
      background-color: rgba(255, 0, 85, 0.15);
    }
    
    .tagline {
      color: var(--text-muted);
      font-style: italic;
      font-size: 0.9rem;
    }
    
    .hero-section {
      background: linear-gradient(135deg, var(--dark-bg) 0%, #2a1a2a 50%, #1a1a2a 100%);
      padding: 120px 0 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 30% 20%, rgba(255, 0, 85, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 70% 80%, rgba(255, 0, 85, 0.05) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .hero-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 800;
      background: linear-gradient(45deg, var(--text-light), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1.5rem;
    }
    
    .hero-subtitle {
      font-size: clamp(1.1rem, 2.5vw, 1.5rem);
      color: var(--text-muted);
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .card {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      position: relative;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary-color), #ff3377);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(255, 0, 85, 0.15);
      border-color: rgba(255, 0, 85, 0.3);
    }
    
    .card:hover::before {
      transform: scaleX(1);
    }
    
    .form-control, .form-select, textarea.form-control {
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: var(--text-light);
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      transition: all 0.3s ease;
    }
    
    .form-control:focus, .form-select:focus, textarea.form-control:focus {
      background-color: rgba(255, 255, 255, 0.15);
      border-color: var(--primary-color);
      color: var(--text-light);
      box-shadow: 0 0 0 0.25rem rgba(255, 0, 85, 0.25);
      transform: translateY(-2px);
    }
    
    .form-control::placeholder {
      color: var(--text-muted);
    }
    
    .form-label {
      color: var(--text-light);
      font-weight: 600;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.9rem;
    }
    
    .input-group-text {
      background-color: rgba(255, 0, 85, 0.1);
      border: 1px solid rgba(255, 0, 85, 0.2);
      color: var(--primary-color);
    }
    
    .btn-danger {
      background: linear-gradient(45deg, var(--primary-color), #ff3377);
      border: none;
      padding: 1rem 2rem;
      font-weight: 600;
      border-radius: 0.75rem;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 1rem;
    }
    
    .btn-danger:hover {
      background: linear-gradient(45deg, #d10045, var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 0, 85, 0.3);
    }
    
    .btn-outline-secondary {
      color: var(--text-muted);
      border: 2px solid var(--text-muted);
      background: transparent;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-outline-secondary:hover {
      background: var(--text-muted);
      border-color: var(--text-muted);
      color: var(--dark-bg);
      transform: translateY(-2px);
    }
    
    .credit-card-icon {
      font-size: 2rem;
      color: var(--primary-color);
      filter: drop-shadow(0 0 10px rgba(255, 0, 85, 0.3));
    }
    
    .security-badge {
      background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0.05) 100%);
      border: 1px solid rgba(40, 167, 69, 0.2);
      border-radius: 0.5rem;
      padding: 0.75rem;
      margin-bottom: 0.5rem;
    }
    
    .security-badge i {
      color: #28a745;
      font-size: 1.1rem;
    }
    
    .order-summary-card {
      background: linear-gradient(135deg, var(--card-bg) 0%, #1a1a2a 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 2rem;
    }
    
    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .summary-row:last-child {
      border-bottom: none;
      border-top: 2px solid rgba(255, 0, 85, 0.3);
      font-weight: 700;
      font-size: 1.2rem;
      color: var(--primary-color);
    }
    
    .total-amount {
      background: linear-gradient(45deg, var(--primary-color), #ff3377);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
    }
    
    .form-check-input {
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .form-check-input:checked {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }
    
    .form-check-input:focus {
      box-shadow: 0 0 0 0.25rem rgba(255, 0, 85, 0.25);
    }
    
    footer {
      background: linear-gradient(135deg, var(--card-bg) 0%, #1a1a2a 100%);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding: 3rem 0 1rem;
    }
    
    .footer-content {
      text-align: center;
      color: var(--text-muted);
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    
    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .footer-links a:hover {
      color: var(--primary-color);
    }
    
    @media (max-width: 768px) {
      .hero-section {
        padding: 100px 0 60px;
      }
      
      .navbar-brand {
        font-size: 1.25rem;
      }
      
      .navbar-logo {
        width: 35px;
        height: 35px;
      }
      
      .tagline {
        display: none !important;
      }
      
      .card-body {
        padding: 1.5rem;
      }
    }
    
    /* Payment page specific enhancements */
    .payment-form {
      animation: fadeInUp 0.8s ease-out;
    }
    
    .form-group {
      position: relative;
      margin-bottom: 1.5rem;
    }
    
    .form-control {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid var(--border-color);
      color: var(--text-light);
      border-radius: 0.75rem;
      padding: 1rem 1.25rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(10px);
      font-size: 1rem;
    }
    
    .form-control:focus {
      background: rgba(255, 255, 255, 0.1);
      border-color: var(--primary-color);
      color: var(--text-light);
      box-shadow: 0 0 0 0.25rem rgba(255, 0, 85, 0.25);
      transform: translateY(-2px);
    }
    
    .form-control.is-valid {
      border-color: #28a745;
      background: rgba(40, 167, 69, 0.1);
    }
    
    .form-control.is-invalid {
      border-color: #dc3545;
      background: rgba(220, 53, 69, 0.1);
      animation: shake 0.5s ease-in-out;
    }
    
    .form-label {
      color: var(--text-light);
      font-weight: 600;
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.9rem;
      transition: color 0.3s ease;
    }
    
    .form-control:focus + .form-label {
      color: var(--primary-color);
    }
    
    .card-number-input {
      background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="%23ff0055" class="bi bi-credit-card" viewBox="0 0 16 16"><path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v1h14V4a1 1 0 0 0-1-1H2zm13 4H1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V7z"/><path d="M2 10a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 1.5rem;
      padding-right: 3rem;
    }
    
    .cvv-input {
      background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="%23ff0055" class="bi bi-shield-lock" viewBox="0 0 16 16"><path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"/><path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 1.5rem;
      padding-right: 3rem;
    }
    
    .btn-submit {
      background: linear-gradient(45deg, var(--primary-color), var(--primary-glow));
      border: none;
      padding: 1rem 2rem;
      font-weight: 600;
      border-radius: 0.75rem;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      width: 100%;
    }
    
    .btn-submit::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .btn-submit:hover::before {
      left: 100%;
    }
    
    .btn-submit:hover {
      background: linear-gradient(45deg, var(--primary-glow), var(--primary-color));
      transform: translateY(-3px);
      box-shadow: var(--shadow-strong);
    }
    
    .btn-submit:disabled {
      background: var(--text-muted);
      transform: none;
      box-shadow: none;
      cursor: not-allowed;
    }
    
    .security-badges {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .security-badge {
      background: linear-gradient(135deg, var(--card-bg) 0%, #1a1a2a 100%);
      border: 1px solid var(--border-color);
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-muted);
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    
    .security-badge:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      transform: translateY(-2px);
    }
    
    .security-badge i {
      color: var(--primary-color);
      font-size: 1.1rem;
    }
    
    .order-summary {
      background: linear-gradient(135deg, var(--card-bg) 0%, #1a1a2a 100%);
      border: 1px solid var(--border-color);
      border-radius: 1rem;
      padding: 2rem;
      animation: fadeInRight 0.8s ease-out;
    }
    
    .order-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }
    
    .order-item:hover {
      background: rgba(255, 0, 85, 0.05);
      padding-left: 0.5rem;
      padding-right: 0.5rem;
      border-radius: 0.5rem;
    }
    
    .order-item:last-child {
      border-bottom: none;
      border-top: 2px solid rgba(255, 0, 85, 0.3);
      font-weight: 700;
      font-size: 1.2rem;
      color: var(--primary-color);
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .card-preview {
      background: linear-gradient(135deg, #2a2a2a 0%, #1a1a2a 100%);
      border: 1px solid var(--border-color);
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
      animation: fadeInLeft 0.8s ease-out;
    }
    
    .card-preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    
    .card-chip {
      width: 50px;
      height: 40px;
      background: linear-gradient(45deg, #ffd700, #ffed4e);
      border-radius: 0.5rem;
      position: relative;
    }
    
    .card-chip::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30px;
      height: 20px;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(0,0,0,0.1) 2px,
        rgba(0,0,0,0.1) 4px
      );
      border-radius: 0.25rem;
    }
    
    .card-number-preview {
      font-family: 'Courier New', monospace;
      font-size: 1.5rem;
      letter-spacing: 0.25rem;
      color: var(--text-light);
      margin-bottom: 1rem;
    }
    
    .card-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-muted);
      font-size: 0.9rem;
    }
    
    .progress-bar {
      height: 4px;
      background: var(--border-color);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 2rem;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-glow));
      width: 0%;
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="bg-dark text-light">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="images/404-Collective-logo.png" alt="404 Collective Logo" class="navbar-logo">
        <span>404 Collective</span>
      </a>
      <p class="tagline mb-0 d-none d-lg-block">what you're never supposed to find, but definitely want to..</p>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html"><i class="bi bi-house-door me-1"></i>Home</a></li>
          <li class="nav-item"><a class="nav-link" href="products.html"><i class="bi bi-grid me-1"></i>Products</a></li>
          <li class="nav-item"><a class="nav-link" href="news.html"><i class="bi bi-newspaper me-1"></i>News</a></li>
          <li class="nav-item"><a class="nav-link" href="support.html"><i class="bi bi-headset me-1"></i>Support</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html"><i class="bi bi-person me-1"></i>Login</a></li>
          <li class="nav-item"><a class="nav-link" href="cart.html"><i class="bi bi-cart3 me-1"></i>Cart</a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <!-- Hero -->
  <section class="hero-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8 text-center">
          <h1 class="hero-title">Secure Payment</h1>
          <p class="hero-subtitle">Complete your purchase with our secure payment gateway.</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Payment Content -->
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <!-- Progress Bar -->
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="row g-4">
          <!-- Payment Form -->
          <div class="col-lg-8">
            <div class="card payment-form">
              <div class="card-body p-4">
                <h4 class="mb-4">
                  <i class="bi bi-credit-card me-2"></i>Payment Information
                </h4>
                
                <form id="paymentForm">
                  <div class="row">
                    <div class="col-12 mb-3">
                      <label for="cardNumber" class="form-label">Card Number</label>
                      <input type="text" class="form-control card-number-input" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                      <div class="invalid-feedback"></div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                      <label for="expiry" class="form-label">Expiry Date</label>
                      <input type="text" class="form-control" id="expiry" placeholder="MM/YY" maxlength="5" required>
                      <div class="invalid-feedback"></div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                      <label for="cvv" class="form-label">CVV</label>
                      <input type="text" class="form-control cvv-input" id="cvv" placeholder="123" maxlength="4" required>
                      <div class="invalid-feedback"></div>
                    </div>
                    
                    <div class="col-12 mb-3">
                      <label for="cardholderName" class="form-label">Cardholder Name</label>
                      <input type="text" class="form-control" id="cardholderName" placeholder="John Doe" required>
                      <div class="invalid-feedback"></div>
                    </div>
                    
                    <div class="col-12 mb-4">
                      <button type="submit" class="btn btn-submit" id="submitBtn">
                        <i class="bi bi-lock me-2"></i>Pay $2,081.96
                      </button>
                    </div>
                  </div>
                </form>
                
                <!-- Security Badges -->
                <div class="security-badges">
                  <div class="security-badge">
                    <i class="bi bi-shield-check"></i>
                    <span>SSL Encrypted</span>
                  </div>
                  <div class="security-badge">
                    <i class="bi bi-lock"></i>
                    <span>Secure Payment</span>
                  </div>
                  <div class="security-badge">
                    <i class="bi bi-patch-check"></i>
                    <span>PCI Compliant</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Order Summary -->
          <div class="col-lg-4">
            <div class="order-summary">
              <h5 class="mb-3">
                <i class="bi bi-receipt me-2"></i>Order Summary
              </h5>
              
              <div class="order-item">
                <span>Inferno 10 Pro</span>
                <span>$1,299.99</span>
              </div>
              <div class="order-item">
                <span>Inferno Watch (x2)</span>
                <span>$599.98</span>
              </div>
              <div class="order-item">
                <span>Shipping</span>
                <span>$29.99</span>
              </div>
              <div class="order-item">
                <span>Tax</span>
                <span>$152.00</span>
              </div>
              <div class="order-item">
                <span>Total</span>
                <span class="total-amount">$2,081.96</span>
              </div>
            </div>
            
            <!-- Card Preview -->
            <div class="card-preview">
              <div class="card-preview-header">
                <div class="card-chip"></div>
                <i class="bi bi-credit-card text-primary" style="font-size: 2rem;"></i>
              </div>
              <div class="card-number-preview" id="cardPreview">•••• •••• •••• ••••</div>
              <div class="card-details">
                <span id="namePreview">CARDHOLDER NAME</span>
                <span id="expiryPreview">MM/YY</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-links">
          <a href="about.html">About Us</a>
          <a href="products.html">Products</a>
          <a href="support.html">Support</a>
          <a href="contact.html">Contact</a>
          <a href="news.html">News</a>
        </div>
        <p class="mb-0">© 2025 404 Collective. All rights reserved. | what you're never supposed to find, but definitely want to..</p>
      </div>
    </div>
  </footer>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
  <script>
    // Enhanced payment form functionality
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('paymentForm');
        const cardNumber = document.getElementById('cardNumber');
        const expiry = document.getElementById('expiry');
        const cvv = document.getElementById('cvv');
        const cardholderName = document.getElementById('cardholderName');
        const submitBtn = document.getElementById('submitBtn');
        
        // Card number formatting and validation
        cardNumber.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '');
            value = value.replace(/\D/g, '');
            value = value.replace(/(\d{4})/g, '$1 ').trim();
            e.target.value = value;
            
            // Update preview
            const preview = value || '•••• •••• •••• ••••';
            document.getElementById('cardPreview').textContent = preview;
            
            // Validate
            if (value.length >= 19) {
                if (validateCardNumber(value)) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                    updateProgress(25);
                } else {
                    this.classList.remove('is-valid');
                    this.classList.add('is-invalid');
                    showFieldError(this, 'Invalid card number');
                }
            }
        });
        
        // Expiry formatting and validation
        expiry.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
            
            // Update preview
            const preview = value || 'MM/YY';
            document.getElementById('expiryPreview').textContent = preview;
            
            // Validate
            if (value.length === 5) {
                if (validateExpiry(value)) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                    updateProgress(50);
                } else {
                    this.classList.remove('is-valid');
                    this.classList.add('is-invalid');
                    showFieldError(this, 'Invalid expiry date');
                }
            }
        });
        
        // CVV validation
        cvv.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            e.target.value = value;
            
            if (value.length >= 3) {
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');
                updateProgress(75);
            }
        });
        
        // Cardholder name
        cardholderName.addEventListener('input', function(e) {
            const value = e.target.value.toUpperCase();
            document.getElementById('namePreview').textContent = value || 'CARDHOLDER NAME';
            
            if (value.length >= 3) {
                this.classList.remove('is-invalid');
                this.classList.add('is-valid');
                updateProgress(100);
            }
        });
        
        // Form submission
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate all fields
            const isValid = validateAllFields();
            
            if (isValid) {
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>Processing...';
                
                // Simulate payment processing
                setTimeout(() => {
                    showToast('Payment successful!', 'success');
                    setTimeout(() => {
                        window.location.href = 'confirm-order.html';
                    }, 2000);
                }, 3000);
            } else {
                showToast('Please fix the errors above', 'error');
            }
        });
    });
    
    function validateCardNumber(num) {
        // Luhn algorithm
        let arr = (num + '').split('').reverse().map(x => parseInt(x));
        let lastDigit = arr.splice(0, 1)[0];
        let sum = arr.reduce((acc, val, i) => (i % 2 !== 0 ? acc + val : acc + ((val * 2) % 9) || 9), 0);
        sum += lastDigit;
        return sum % 10 === 0;
    }
    
    function validateExpiry(val) {
        const [month, year] = val.split('/');
        const now = new Date();
        const currentYear = now.getFullYear() % 100;
        const currentMonth = now.getMonth() + 1;
        
        const expMonth = parseInt(month);
        const expYear = parseInt(year);
        
        if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) {
            return false;
        }
        
        return expMonth >= 1 && expMonth <= 12;
    }
    
    function validateAllFields() {
        const fields = ['cardNumber', 'expiry', 'cvv', 'cardholderName'];
        let isValid = true;
        
        fields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            if (!field.value.trim()) {
                field.classList.add('is-invalid');
                showFieldError(field, 'This field is required');
                isValid = false;
            }
        });
        
        return isValid;
    }
    
    function showFieldError(field, message) {
        const feedback = field.parentElement.querySelector('.invalid-feedback');
        if (feedback) {
            feedback.textContent = message;
        }
    }
    
    function updateProgress(percentage) {
        const progressFill = document.getElementById('progressFill');
        progressFill.style.width = percentage + '%';
    }
  </script>
</body>
</html> 